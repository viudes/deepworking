<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />

    <link th:href="@{/assets/bower_components/bootstrap/dist/css/bootstrap.css}"
          href="../../../../assets/bower_components/bootstrap/dist/css/bootstrap.css" rel="stylesheet" />

    <link th:href="@{/assets/bower_components/bootstrap/dist/css/bootstrap-theme.css}"
        href="../../../../assets/bower_components/bootstrap/dist/css/bootstrap-theme.css" rel="stylesheet" />

    <link th:href="@{/assets/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css}"
        href="../../../../assets/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css" rel="stylesheet" />

    <link th:href="@{/assets/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.css}"
        href="../../../../assets/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.css" rel="stylesheet" />

    <link th:href="@{/assets/bower_components/bootstrap-timepicker/css/timepicker.min.css}"
        href="../../../../assets/bower_components/bootstrap-timepicker/css/timepicker.min.css" rel="stylesheet" />

    <link th:href="@{/assets/css/typeahead.css}"
        href="../../../../assets/css/typeahead.css" rel="stylesheet" />

    <style>
       .centerfy img {
           margin: 0 auto;
       }
       .centerfy {
           text-align: center;
       }
    </style>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

  <div class="container">

    <div class="page-header">
        <h1 th:text="${projectName}">Projeto AA</h1>
        <h1><small>Register an activity entry</small></h1>
    </div>

    <form method="post" th:action="${(#mvc.url('AC#save').arg(0, projectId)).build()}" th:object="${activityEntry}">

      <input type="hidden" th:value="*{projectId}" id="projectId" />

      <div class="row">
          <div class="form-group col-lg-2">
              <label for="date">Date</label>
              <div id="date" class="input-group date">
                  <input th:field="*{date}" type="text" class="form-control" placeholder="Date of work"/>
                  <span class="input-group-addon add-on">
                    <span class="glyphicon glyphicon-calendar"/>
                  </span>
              </div>
              <div th:if="${#fields.hasErrors('date')}" th:errors="*{date}"></div>
          </div>
          <div class="col-lg-2">
              <label for="activityType">Activity type</label>
              <div class="form-group">
                <input th:field="*{activityType}" id="activityType" class="typeahead form-control" type="text" placeholder="Type of activity"/>
              </div>
              <div th:if="${#fields.hasErrors('activityType')}" th:errors="*{activityType}"></div>
          </div>
      </div>

      <div class="row">
          <div class="col-lg-2">
              <dl>
                  <dt><label for="startTime">Start time</label></dt>
                  <dd>
                    <div class="input-group bootstrap-timepicker timepicker">
                      <input id="startTime" th:field="*{startTime}" type="text" class="form-control input-small input-timepicker" placeholder="Hour when started" />
                      <span class="input-group-addon"><i class="glyphicon glyphicon-time"></i></span>
                    </div>
                  </dd>
              </dl>
          </div>
          <div class="col-lg-2">
              <dl>
                  <dt><label for="amountHours">Amount of time</label></dt>
                  <dd><input th:field="*{amountTimeInMinutes}" class="form-control" type="text" id="amountHours" placeholder="Minutes spent"/></dd>
              </dl>
              <div th:if="${#fields.hasErrors('amountTimeInMinutes')}" th:errors="*{amountTimeInMinutes}"></div>
          </div>
      </div>

      <div class="row">
        <div class="col-lg-6">
            <dl>
                <dt><label for="description">Description</label></dt>
                <dd>
                    <input class="form-control" type="text" th:field="*{description}" id="description" placeholder="Type in few words some details about this activity" />
                </dd>
            </dl>
        </div>
      </div>

      <div id="actions" class="row">
        <div class="col-md-12">
          <button type="submit" class="btn btn-primary">Save</button>
          <a th:href="@{/project/{projectId}(projectId=${projectId})}"
            href="../project_details.html" class="btn btn-default">Cancel</a>
        </div>
      </div>

    </form>

  </div>
</body>

<script th:src="@{/assets/bower_components/jquery/dist/jquery.js}"
    src="../../../../assets/bower_components/jquery/dist/jquery.js" type="text/javascript"></script>

<script th:src="@{/assets/bower_components/bootstrap/dist/js/bootstrap.js}"
    src="../../../../assets/bower_components/bootstrap/dist/js/bootstrap.js" type="text/javascript"></script>

<script th:src="@{/assets/bower_components/typeahead.js/dist/typeahead.jquery.min.js}"
    src="../../../../assets/bower_components/typeahead.js/dist/typeahead.jquery.min.js" type="text/javascript"></script>

<script th:src="@{/assets/bower_components/typeahead.js/dist/typeahead.bundle.min.js}"
    src="../../../../assets/bower_components/typeahead.js/dist/typeahead.bundle.min.js" type="text/javascript"></script>

<script th:src="@{/assets/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.js}"
    src="../../../../assets/bower_components/bootstrap-tagsinput/dist/bootstrap-tagsinput.js" type="text/javascript"></script>

<script th:src="@{/assets/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.js}"
    src="../../../../assets/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.js" type="text/javascript"></script>

<script th:src="@{/assets/bower_components/bootstrap-timepicker/js/bootstrap-timepicker.js}"
    src="../../../../assets/bower_components/bootstrap-timepicker/js/bootstrap-timepicker.js" type="text/javascript"></script>

<script th:src="@{/assets/js/components.js}"
    src="../../../../assets/js/components.js" type="text/javascript"></script>

<script type="text/javascript">
  var projectId = $('#projectId').val();

  deepworking.timePicker.init($('.input-timepicker'));

  deepworking.datePicker.init($('#date'));

  deepworking.typeahead.init($("#activityType"), {
      dataSourceUri: '/project/' + projectId + '/activityTypes'
  });
</script>
</html>
